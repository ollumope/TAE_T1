---
title: "Agrupamientos de los barrios de Medellín"
author: "Santiago Arboleda Quiroz, Olga Lucía Montoya Pérez, Alberto Ramirez Velasquez, Juan David Tangarife Patino"
date: "Semestre 02-2019"
---

En este trabajo se abordará el problema de agrupar los barrios de Medellín de acuerdo a distintas dimensiones y
analizar espacialmente las agrupaciones.

El insumo principal de este trabajo son los datos abiertos del portal Medata y en particular la Encuesta de Calidad de Vida Medellín Cómo vamos.

```{r}
ECV <- read.csv("./dataSet/encuesta_calidad_vida.csv", header = TRUE, sep=";")
```

1. Caracterización de las dimensiones para la dimensión ALIMENTACION

```{r}
summary(ECV)
```

Para la dimensión de ALIMENTACION se toman las preguntas:
P_291 - En este hogar: En los ultimos 30 días, ¿Usted se preocupó alguna vez de que en su hogar se acabaran los alimentos debido a falta de dinero?
P_292 - En este hogar: En los ultimos 30 días, ¿Alguna vez en su hogar se quedaron sin dinero para obtener una P_295 - alimentación nutritiva:...?
En este hogar: En los ultimos 30 días, ¿Alguna vez en su hogar se quedaron sin alimentos por falta de dinero?

```{r}
ECV_ALIMENTO <- data.frame(ECV$encuesta_calidad.p_1,ECV$encuesta_calidad.encuesta,ECV$encuesta_calidad.persona,ECV$encuesta_calidad.comuna,ECV$encuesta_calidad.barrio,ECV$encuesta_calidad.p_291, ECV$encuesta_calidad.p_292, ECV$encuesta_calidad.p_295)
```

```{r}

names(ECV_ALIMENTO)[1] <- 'reemplazo'
names(ECV_ALIMENTO)[2] <- 'encuesta'
names(ECV_ALIMENTO)[3] <- 'persona'
names(ECV_ALIMENTO)[4] <- 'comuna'
names(ECV_ALIMENTO)[5] <- 'barrio'
names(ECV_ALIMENTO)[6] <- 'p_291'
names(ECV_ALIMENTO)[7] <- 'p_292'
names(ECV_ALIMENTO)[8] <- 'p_295'
```

Revisemos como es el comportamiento de los datos seleccionados
```{r}
summary(ECV_ALIMENTO)
```

Dado que para las preguntas seleccionas en la dimension de alimentación (291,292,295), no fueron contestadas por ningunos de los encuentados del mismo hogar, se descartan esas respuestas para el analisis

```{r}
ECV_ALIMENTO_DEP <- subset(ECV_ALIMENTO,ECV$encuesta_calidad.p_291 != 'NULL' & ECV$encuesta_calidad.p_292 != 'NULL' & ECV$encuesta_calidad.p_295 != 'NULL')
nrow(ECV_ALIMENTO_DEP)
```
```{r}
summary(ECV_ALIMENTO_DEP)
```

Definiciones:

Cuando las preguntas hacen referencia a nivel de hogar, tomaremos la moda como referencia, es decir, el valor más representativo en las respuestas obtenidas en ese hogar. La proporción se hará sobre el total de los encuestados.


Las columnas de preguntas son de tipo caracter, es necesario convertirlas a enteros
```{r}
#ECV_ALIMENTO_DEP[c('p_291','p_292','p_295')] <- lapply(ECV_ALIMENTO_DEP[c('p_291','p_292','p_295')], as.integer)

#ECV_ALIMENTO_DEP$p_292 = as.numeric(ECV_ALIMENTO_DEP$p_292)

transform(ECV_ALIMENTO_DEP, p_295 = as.numeric(p_295))

```


Se realiza el agrupamiento por barrio

```{r}
library(dplyr)
true_291 <- aggregate(ECV_ALIMENTO_DEP["p_291"], by=ECV_ALIMENTO_DEP["barrio"], FUN=sum)
true_291

```


```{r}
aguasfrias <- subset(ECV_ALIMENTO_DEP,barrio == 'AGUAS FRÍAS')
aguasfrias
```
```{r}
suma <- count(aguasfrias,p_291)
suma
```

